<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìŠ¤ë§ˆíŠ¸ë Œì¦ˆ - Smart Eye Health</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body { background: #1F2937; color: white; }
    .container { background: #1F2937; }
  </style>
</head>
<body>
  <!-- Sidebar Navigation (Desktop) -->
  <nav class="sidebar-nav" style="background: #1F2937;">
    <div style="margin-bottom: 32px; padding: 12px;">
      <h2 style="font-size: 20px; font-weight: bold; color: #3B82F6;">Smart Eye Health</h2>
    </div>
    <a href="index.html" class="nav-item" style="color: white;">
      <div class="nav-icon">ğŸ </div>
      <div class="nav-label">í™ˆ</div>
    </a>
    <a href="dashboard.html" class="nav-item" style="color: white;">
      <div class="nav-icon">ğŸ“Š</div>
      <div class="nav-label">ëŒ€ì‹œë³´ë“œ</div>
    </a>
    <a href="smartlens.html" class="nav-item active" style="background: #374151; color: white;">
      <div class="nav-icon">ğŸ‘“</div>
      <div class="nav-label">ìŠ¤ë§ˆíŠ¸ë Œì¦ˆ</div>
    </a>
    <a href="settings.html" class="nav-item" style="color: white;">
      <div class="nav-icon">âš™ï¸</div>
      <div class="nav-label">ì„¤ì •</div>
    </a>
  </nav>

  <div class="container">
    <!-- Header -->
    <div class="header" style="color: white;">
      <button style="background: none; border: none; font-size: 24px; cursor: pointer; color: white;">â˜°</button>
      <h1 class="header-title" style="flex: 1; text-align: center; color: white;">ëŒ€ì‹œë³´ë“œ</h1>
      <button style="background: none; border: none; font-size: 24px; cursor: pointer;">ğŸ””</button>
    </div>

    <!-- Device Status -->
    <div class="card" style="background: #374151; margin-bottom: 24px;">
      <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
        <div style="color: white;">ğŸ“¡ ì—°ê²°ë¨</div>
        <div style="display: flex; align-items: center; gap: 4px;">
          <span>ğŸ”‹</span>
          <span id="battery" style="color: #10B981; font-weight: 600;">87%</span>
        </div>
      </div>
      <div style="display: flex; justify-content: space-between; margin-bottom: 16px;">
        <div style="color: white;">ğŸ“± íŒì›¨ì–´ v1.2.0</div>
        <div style="color: #10B981; font-weight: 600;">ìµœì‹  ë²„ì „</div>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 12px; border-top: 1px solid #4B5563;">
        <div style="color: white;">ì‹¤ì‹œê°„ ë°ì´í„°</div>
        <div style="width: 48px; height: 28px; background: #3B82F6; border-radius: 14px; position: relative; cursor: pointer;">
          <div style="width: 24px; height: 24px; background: white; border-radius: 50%; position: absolute; top: 2px; left: 22px;"></div>
        </div>
      </div>
    </div>

    <!-- ì‹¤ì‹œê°„ ë Œì¦ˆ ë°ì´í„° -->
    <div class="section">
      <div class="section-title" style="color: white;">ì‹¤ì‹œê°„ ë Œì¦ˆ ë°ì´í„°</div>

      <div class="card" style="background: #374151; margin-bottom: 12px;">
        <div style="font-size: 13px; color: #9CA3AF; margin-bottom: 8px;">ì•ˆêµ¬ ë¯¸ì„¸ ì••ë ¥</div>
        <div style="font-size: 24px; font-weight: bold; color: white; margin-bottom: 4px;" id="microPressure">15.5 mmHg</div>
        <div style="font-size: 12px; color: #10B981;">ì‹¤ì‹œê°„ +0.2%</div>
      </div>

      <div class="card" style="background: #374151; margin-bottom: 12px;">
        <div style="font-size: 13px; color: #9CA3AF; margin-bottom: 8px;">ë§ˆì´í¬ë¡œ ëª¨ì…˜</div>
        <div style="font-size: 24px; font-weight: bold; color: white; margin-bottom: 4px;" id="microMotion">0.8 mm/s</div>
        <div style="font-size: 12px; color: #EF4444;">ì‹¤ì‹œê°„ -1.5%</div>
      </div>

      <div class="card" style="background: #374151;">
        <div style="font-size: 13px; color: #9CA3AF; margin-bottom: 8px;">ëˆˆ ê¹œë¹¡ì„ ë¹ˆë„</div>
        <div style="font-size: 24px; font-weight: bold; color: white; margin-bottom: 4px;" id="blinkFreq">18 íšŒ/ë¶„</div>
        <div style="font-size: 12px; color: #10B981;">ì§€ë‚œ 1ë¶„ +5.0%</div>
      </div>
    </div>

    <!-- AI ì •ë°€ ì˜ˆì¸¡ -->
    <div class="section">
      <div class="section-title" style="color: white;">AI ì •ë°€ ì˜ˆì¸¡</div>
      <div class="card" style="background: #374151; text-align: center; padding: 24px;">
        <div class="gauge-container" style="margin: 0 auto; width: 180px; height: 180px;">
          <svg class="gauge-svg" viewBox="0 0 180 180" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;">
            <circle class="gauge-bg" cx="90" cy="90" r="80" style="stroke: #1F2937;"></circle>
            <circle id="riskGaugeFill" class="gauge-fill" cx="90" cy="90" r="80" style="stroke: #EF4444;"></circle>
          </svg>
          <div class="gauge-value">
            <div class="gauge-number" style="color: white; font-size: 36px;" id="riskScore">82</div>
          </div>
        </div>
        <div style="margin-top: 16px; padding: 8px 24px; background: #EF4444; border-radius: 20px; color: white; font-weight: 600; font-size: 14px; display: inline-block;">ë†’ìŒ</div>
        <div style="font-size: 16px; font-weight: bold; margin-top: 16px; color: white;">í˜„ì¬ ìœ„í—˜ë„: ë†’ìŒ</div>
        <div style="font-size: 13px; color: #9CA3AF; margin-top: 8px;">ì£¼ìš” ìœ„í—˜ ìš”ì¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</div>
      </div>

      <div class="card" style="background: #374151;">
        <div style="margin-bottom: 16px;">
          <div style="font-size: 14px; color: white; margin-bottom: 8px;">í”¼ë¡œë„ ëˆ„ì </div>
          <div style="width: 100%; height: 8px; background: #1F2937; border-radius: 4px; overflow: hidden;">
            <div style="width: 60%; height: 100%; background: #F59E0B;"></div>
          </div>
          <div style="font-size: 12px; color: #9CA3AF; text-align: right; margin-top: 4px;">60%</div>
        </div>

        <div style="margin-bottom: 16px;">
          <div style="font-size: 14px; color: white; margin-bottom: 8px;">ìì„¸ ë¶ˆê· í˜•</div>
          <div style="width: 100%; height: 8px; background: #1F2937; border-radius: 4px; overflow: hidden;">
            <div style="width: 25%; height: 100%; background: #3B82F6;"></div>
          </div>
          <div style="font-size: 12px; color: #9CA3AF; text-align: right; margin-top: 4px;">25%</div>
        </div>

        <div>
          <div style="font-size: 14px; color: white; margin-bottom: 8px;">ì™¸ë¶€ ì¡°ë„</div>
          <div style="width: 100%; height: 8px; background: #1F2937; border-radius: 4px; overflow: hidden;">
            <div style="width: 15%; height: 100%; background: #6B7280;"></div>
          </div>
          <div style="font-size: 12px; color: #9CA3AF; text-align: right; margin-top: 4px;">15%</div>
        </div>
      </div>
    </div>

    <!-- í™œë™ ê¸°ë¡ -->
    <div class="section">
      <div class="section-title" style="color: white;">í™œë™ ê¸°ë¡</div>
      <div style="display: flex; align-items: center; gap: 12px; padding: 16px; background: #DC2626; border-radius: 12px; margin-bottom: 12px;">
        <div style="width: 32px; height: 32px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #DC2626; font-weight: bold; font-size: 18px;">!</div>
        <div style="font-size: 16px; font-weight: bold; color: white;">ì£¼ì˜: ë†’ì€ ì•ˆì•• ê°ì§€</div>
      </div>
      <div style="font-size: 13px; color: #D1D5DB; margin-bottom: 16px; line-height: 1.4;">
        ì•ˆì „í•œ ì‚¬ìš©ì„ ìœ„í•´ ì¦‰ì‹œ íœ´ì‹ í•˜ê±°ë‚˜ ë Œì¦ˆë¥¼ ì œì¡°ì •í•˜ì„¸ìš”.
      </div>
      <div style="display: flex; gap: 12px;">
        <button class="btn btn-primary" style="flex: 1;">ë Œì¦ˆ ì •ë°€ ê°€ì´ë“œ ë³´ê¸°</button>
        <button class="btn btn-secondary" style="flex: 1;">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="index.html" class="nav-item">
      <div class="nav-icon">ğŸ </div>
      <div class="nav-label">í™ˆ</div>
    </a>
    <a href="dashboard.html" class="nav-item">
      <div class="nav-icon">ğŸ“Š</div>
      <div class="nav-label">ëŒ€ì‹œë³´ë“œ</div>
    </a>
    <a href="smartlens.html" class="nav-item active">
      <div class="nav-icon">ğŸ‘“</div>
      <div class="nav-label">ë Œì¦ˆ</div>
    </a>
    <a href="settings.html" class="nav-item">
      <div class="nav-icon">âš™ï¸</div>
      <div class="nav-label">ì„¤ì •</div>
    </a>
  </nav>

  <script src="js/sensor.js"></script>
  <script>
    function drawRiskGauge(value) {
      const radius = 80;
      const circumference = 2 * Math.PI * radius;
      const offset = circumference * (1 - value / 100);

      document.getElementById('riskGaugeFill').style.strokeDasharray = circumference;
      document.getElementById('riskGaugeFill').style.strokeDashoffset = offset;
    }

    function updateData() {
      const data = sensorManager.getCurrent();
      const risk = sensorManager.calculateRisk();

      document.getElementById('microPressure').textContent = data.eyePressure + ' mmHg';
      document.getElementById('microMotion').textContent = data.microMotion + ' mm/s';
      document.getElementById('blinkFreq').textContent = data.blinkRate + ' íšŒ/ë¶„';
      document.getElementById('riskScore').textContent = risk.score;

      drawRiskGauge(risk.score);
    }

    sensorManager.start();
    updateData();
    window.addEventListener('sensorUpdate', updateData);
  </script>
</body>
</html>
